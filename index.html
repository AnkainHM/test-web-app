<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test WebApp</title>
</head>
<body>
  <h1>üöÄ Test Telegram WebApp</h1>
  <p>–í—ã–±–µ—Ä–∏ –æ–ø—Ü–∏—é –∏ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"</p>

  <select id="option">
    <option value="1">–í–∞—Ä–∏–∞–Ω—Ç 1</option>
    <option value="2">–í–∞—Ä–∏–∞–Ω—Ç 2</option>
    <option value="3">–í–∞—Ä–∏–∞–Ω—Ç 3</option>
  </select>

  <script>
    const tg = window.Telegram?.WebApp;

    if (!tg) {
      alert("‚ùå Telegram WebApp API –Ω–µ –Ω–∞–π–¥–µ–Ω. –û—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ Telegram!");
    } else {
      tg.ready();
      console.log("‚úÖ WebApp –≥–æ—Ç–æ–≤");
      console.log("initDataUnsafe:", tg.initDataUnsafe);

      tg.MainButton.setText("–û—Ç–ø—Ä–∞–≤–∏—Ç—å");
      tg.MainButton.show();

      tg.MainButton.onClick(() => {
        const option = document.getElementById("option").value;
        const payload = { testValue: option, time: new Date().toISOString() };

        console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:", payload);
        tg.sendData(JSON.stringify(payload));

        tg.showAlert("‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!");
        setTimeout(() => tg.close(), 800); // –≤–∞–∂–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞!
      });
    }
  </script>
</body>
</html>
